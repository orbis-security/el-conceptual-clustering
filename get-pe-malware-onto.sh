#!/bin/bash

set -eu

WEBBASE="https://orbis-security.com/foldershare/file"
BASE="./pe-malware-ontology"

mkdir "$BASE"
cd "$BASE"

function get_and_extract() {
    local SIZE="$1"
    shift
    mkdir "$SIZE"
    for id in "$@"; do
        wget "$WEBBASE/$id"
        unzip $id '*/dataset_*_examples.json' '*/dataset_*.owl' -d "$SIZE"
        rm $id
    done
}

get_and_extract 1000 $(seq 5 14)
get_and_extract 10000 $(seq 16 25)
get_and_extract 100000 $(seq 26 35)
get_and_extract 800000 75
